<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Intel AMT/vPro remote power Management">
    <meta name="author" content="jan@hacker.ch">
    <title>amtc-web - AMT/DASH remote power management</title>
    <link href="css/styles.css" rel="stylesheet">
    <link href="css/amtc-web.css" rel="stylesheet">
</head>
<body>

<script type="text/x-handlebars">
  <div id="wrapper">
    <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">
            {{appName}} <i id="bolt" class="fa fa-bolt fa-fw grey flash"></i> 
            <i>remote. power. management.</i></a>
        </div>
        <!-- /.navbar-header -->
         
        <ul class="nav navbar-top-links navbar-right">
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                    <i class="fa fa-envelope fa-fw"></i>  <i class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-messages">
                    <li>
                        <a href="#">
                            <div>
                                <strong>John Smith</strong>
                                <span class="pull-right text-muted">
                                    <em>Yesterday</em>
                                </span>
                            </div>
                            <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque eleifend...</div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <strong>John Smith</strong>
                                <span class="pull-right text-muted">
                                    <em>Yesterday</em>
                                </span>
                            </div>
                            <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque eleifend...</div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <strong>John Smith</strong>
                                <span class="pull-right text-muted">
                                    <em>Yesterday</em>
                                </span>
                            </div>
                            <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque eleifend...</div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a class="text-center" href="#">
                            <strong>Read All Messages</strong>
                            <i class="fa fa-angle-right"></i>
                        </a>
                    </li>
                </ul>
                <!-- /.dropdown-messages -->
            </li>
            <!-- /.dropdown -->
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                    <i class="fa fa-tasks fa-fw"></i>  <i class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-tasks">
                    <li>
                        <a href="#">
                            <div>
                                <p>
                                    <strong>Task 1</strong>
                                    <span class="pull-right text-muted">40% Complete</span>
                                </p>
                                <div class="progress progress-striped active">
                                    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
                                        <span class="sr-only">40% Complete (success)</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <p>
                                    <strong>Task 2</strong>
                                    <span class="pull-right text-muted">20% Complete</span>
                                </p>
                                <div class="progress progress-striped active">
                                    <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%">
                                        <span class="sr-only">20% Complete</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <p>
                                    <strong>Task 3</strong>
                                    <span class="pull-right text-muted">60% Complete</span>
                                </p>
                                <div class="progress progress-striped active">
                                    <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                                        <span class="sr-only">60% Complete (warning)</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <p>
                                    <strong>Task 4</strong>
                                    <span class="pull-right text-muted">80% Complete</span>
                                </p>
                                <div class="progress progress-striped active">
                                    <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%">
                                        <span class="sr-only">80% Complete (danger)</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a class="text-center" href="#">
                            <strong>See All Tasks</strong>
                            <i class="fa fa-angle-right"></i>
                        </a>
                    </li>
                </ul>
                <!-- /.dropdown-tasks -->
            </li>
            <!-- /.dropdown -->
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                    <i class="fa fa-bell fa-fw"></i>  <i class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-alerts">
                    <li>
                        <a href="#">
                            <div>
                                <i class="fa fa-comment fa-fw"></i> New Comment
                                <span class="pull-right text-muted small">4 minutes ago</span>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <i class="fa fa-twitter fa-fw"></i> 3 New Followers
                                <span class="pull-right text-muted small">12 minutes ago</span>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <i class="fa fa-envelope fa-fw"></i> Message Sent
                                <span class="pull-right text-muted small">4 minutes ago</span>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <i class="fa fa-tasks fa-fw"></i> New Task
                                <span class="pull-right text-muted small">4 minutes ago</span>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <i class="fa fa-upload fa-fw"></i> Server Rebooted
                                <span class="pull-right text-muted small">4 minutes ago</span>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a class="text-center" href="#">
                            <strong>See All Alerts</strong>
                            <i class="fa fa-angle-right"></i>
                        </a>
                    </li>
                </ul>
                <!-- /.dropdown-alerts -->
            </li>
            <!-- /.dropdown -->
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                    <i class="fa fa-user fa-fw"></i>  <i class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-user">
                    <li><a href="#"><i class="fa fa-user fa-fw"></i> User Profile</a>
                    </li>
                    <li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>
                    </li>
                    <li class="divider"></li>
                    <li><a href="#"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
                    </li>
                </ul>
                <!-- /.dropdown-user -->
            </li>
            <!-- /.dropdown -->
        </ul>
        <!-- /.navbar-top-links -->

        <div class="navbar-default sidebar" role="navigation">
            <div class="sidebar-nav navbar-collapse">
                <ul class="nav" id="side-menu">
                    <li class="sidebar-search">
                        <div class="input-group custom-search-form">
                            <input type="text" class="form-control" placeholder="Search host or room">
                            <span class="input-group-btn">
                            <button class="btn btn-default" type="button">
                                <i class="fa fa-search"></i>
                            </button>
                        </span>
                        </div>
                        <!-- /input-group -->
                    </li>
                    <li>
                        <a class="active" href="#"><i class="fa fa-dashboard fa-fw"></i> Dashboard</a>
                    </li>                    
                    <li>
                        <a {{bindAttr href="view.href"}}>
                            <i class="fa fa-sitemap fa-fw"></i> Monitor / Control Hosts<span class="fa arrow">
                        </a>
                        {{partial "ouSelection"}}
                    </li>
                    {{#linkTo 'logs' tagName="li"}}<a {{bindAttr href="view.href"}}><i class="fa fa-align-left fa-fw"></i> OS and Powerstate Logs</a>{{/linkTo}}
                    {{#linkTo 'energy' tagName="li"}}<a {{bindAttr href="view.href"}}><i class="fa fa-area-chart fa-fw"></i> Energy Consumption</a>{{/linkTo}}
                    {{#linkTo 'schedule' tagName="li"}}<a {{bindAttr href="view.href"}}><i class="fa fa-clock-o fa-fw"></i> Power Schedule</a>{{/linkTo}}
                    <li>
                        <a href="#"><i class="fa fa-wrench fa-fw"></i> Administration<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href="#/ous"><i class="fa fa-university fa-fw"></i> Hosts and Rooms</a>
                            </li>
                            <li>
                                <a href="#/usermanagement"><i class="fa fa-users fa-fw"></i> Users and Groups</a>
                            </li>
                            <li>
                                <a href="#/systemhealth"><i class="fa fa-plug fa-fw"></i> Scheduler Log and Status</a>
                            </li>
                            {{#linkTo 'optionsets' tagName="li"}}<a {{bindAttr href="view.href"}}><i class="fa fa-terminal fa-fw"></i> Basic Configuration</a>{{/linkTo}}
                        </ul>
                        <!-- /.nav-second-level -->
                    </li>
                    <li>
                        <a href="#"><i class="fa fa-ambulance fa-fw"></i> Help<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li> <a href="#/pages/1"><i class="fa fa-wrench fa-fw"></i> Configuring AMT</a> </li>
                            <li> <a href="#/pages/2"><i class="fa fa-child fa-fw"></i> {{appName}} First Steps</a> </li>
                            <li> <a href="#/pages/3"><i class="fa fa-github fa-fw"></i> About, Feedback, ...</a> </li>
                        </ul>
                        <!-- /.nav-second-level -->
                    </li>
                </ul>
            </div>
            <!-- /.sidebar-collapse -->
        </div>
        <!-- /.navbar-static-side -->
    </nav>
    
    <div id="page-wrapper">
        {{outlet}}
    </div>

  </div>
</script>

<script type="text/x-handlebars" id="index">
   <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Dashboard</h1>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->

    <!-- Colorful big numbers OS header-->
    <div class="row">
        <div class="col-lg-3 col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-3">
                            <i class="fa fa-linux fa-5x"></i>
                        </div>
                        <div class="col-xs-9 text-right">
                            <div class="huge">67</div>
                            <div>running Linux</div>
                        </div>
                    </div>
                </div>
                <a href="#">
                    <div class="panel-footer">
                        <span class="pull-left">View Details</span>
                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                        <div class="clearfix"></div>
                    </div>
                </a>
            </div>
        </div>
        <div class="col-lg-3 col-md-6">
            <div class="panel panel-green">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-3">
                            <i class="fa fa-windows fa-5x"></i>
                        </div>
                        <div class="col-xs-9 text-right">
                            <div class="huge">120</div>
                            <div>running Windows</div>
                        </div>
                    </div>
                </div>
                <a href="#">
                    <div class="panel-footer">
                        <span class="pull-left">View Details</span>
                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                        <div class="clearfix"></div>
                    </div>
                </a>
            </div>
        </div>
        <div class="col-lg-3 col-md-6">
            <div class="panel panel-yellow">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-3">
                            <i class="fa fa-power-off fa-5x"></i>
                        </div>
                        <div class="col-xs-9 text-right">
                            <div class="huge">34</div>
                            <div>powered down</div>
                        </div>
                    </div>
                </div>
                <a href="#">
                    <div class="panel-footer">
                        <span class="pull-left">View Details</span>
                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                        <div class="clearfix"></div>
                    </div>
                </a>
            </div>
        </div>
        <div class="col-lg-3 col-md-6">
            <div class="panel panel-red">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-3">
                            <i class="fa fa-frown-o fa-5x"></i>
                        </div>
                        <div class="col-xs-9 text-right">
                            <div class="huge">13</div>
                            <div>unreachable</div>
                        </div>
                    </div>
                </div>
                <a href="#">
                    <div class="panel-footer">
                        <span class="pull-left">View Details</span>
                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                        <div class="clearfix"></div>
                    </div>
                </a>
            </div>
        </div>
    </div>
    <!-- 1st col: Stats Graph and "Recent OS / power..." (tbd) and, 2nd col: Notifications -->
    <div class="row">
        <div class="col-lg-8">
            <!-- Operational Hosts Log: -->
            <div class="panel panel-default">
                <div class="panel-heading">
                    <i class="fa fa-bar-chart-o fa-fw"></i> Operational Hosts Log
                    <div class="pull-right">
                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                                Show ...
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu pull-right" role="menu">
                                <li><a href="#">Four hours</a>
                                </li>
                                <li><a href="#">One day</a>
                                </li>
                                <li><a href="#">A week</a>
                                </li>
                                <li><a href="#">A month</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <div id="morris-area-chart"></div>
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
            <!-- Energy stats: -->
            <div class="panel panel-default">
                <div class="panel-heading">
                    <i class="fa fa-clock-o fa-fw"></i> Current energy statistics
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <i>None yet</i>
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>
        <!-- /.col-lg-8 -->
        <!-- Notifications: -->
        <div class="col-lg-4">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <i class="fa fa-bell fa-fw"></i> Notifications Panel
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <div class="list-group">
                        {{#if notifications}}
                          {{#each msg in notifications}}
                            <a href="#" class="list-group-item">
                             <i {{bind-attr class=msg.cssClass}}></i> {{msg.message}}
                             <span class="pull-right text-muted small"><em>{{format-from-now msg.tstamp}}</em></span>
                            </a>
                          {{/each}}
                        {{else}}
                          <i class="fa fa-spinner fa-spin"></i> Loading latest notifications ...
                        {{/if}}
                    </div>
                    <!-- /.list-group -->
                    <a href="#" class="btn btn-default btn-block">View All Alerts</a>
                </div>
                <!-- /.panel-body -->
            </div>
        </div>
        <!-- /.col-lg-4 -->
    </div>
    <!-- /.row -->
</script>

<script type="text/x-handlebars" id="control">
  <div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Monitor and Control {{name}}</h1>
    </div>
    <div class="col-lg-12">
        <p>Hello world</p>
    </div>
  </div>
</script>

<script type="text/x-handlebars" id="logs">
  <div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">OS / availability logs</h1>
    </div>
    <div class="col-lg-12">
        <p>Hello world</p>
    </div>
  </div>
</script>

<script type="text/x-handlebars" id="energy">
  <div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Energy consumption charts</h1>
    </div>
    <div class="col-lg-12">
        <p>Approx....!</p>
    </div>
  </div>
</script>

<script type="text/x-handlebars" id="schedule">
{{! Manage scheduled power-ups/downs }}
  <div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Scheduled power management</h1>
    </div>
    <div class="col-lg-12">
        <p>Hello world</p>
    </div>
  </div>
</script>

<script type="text/x-handlebars" id="setup">
  <div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Basic {{appName}} setup</h1>
    </div>
    <div class="col-lg-12">
        <p>Hello world</p>
    </div>
  </div>
</script>

<script type="text/x-handlebars" id="page">
{{! Display a single markdown page from DB }}
      <div class="row">
        <div class="col-lg-12">
          {{format-markdown page_content}}
        </div>
      </div>
</script>

<!-- OptionSets -->
<script type="text/x-handlebars" id="optionsets">
{{! Display /optionsets page: tabular room list view plus actions:add/remove/edit menu  }}
    <div class="row">
        <div class="col-lg-12">
            {{outlet}} <!-- see rooms/index : big table view of rooms -->
        </div>
    </div>

    <div class="row">
        <h3>Actions</h3>
        <ul>
            <li>{{#link-to 'optionsets.new'}}Add Optionset...{{/link-to}}</li>
        </ul>
    </div class="row">
</script>

<script type="text/x-handlebars" id="optionsets/index">
    {{! Display a table with all rooms }}
    <h1 class="page-header">AMT(c) Option sets</h1>
    <table class="table">
      <thead>
        <tr>
          <th>Edit</th>
          <th>Name</th>
          <th>Description</th>
          <th>Options</th>
        </tr>
      </thead>
      {{#each model}}
        <tr>
          <td>{{#link-to 'optionset' this}}<i class="glyphicon glyphicon-edit"></i>{{/link-to}}</td>
          <td>{{#link-to 'optionset' this}}{{name}}{{/link-to}}</td>
          <td>{{description}}</td>
          <td>TLS etc.</td>
        </td></tr>
      {{/each}}
    </table>
</script>

<script type="text/x-handlebars" id="optionset">
    {{! Display a single OU edit form using partial _deviceEdit }}
    <h1 class="page-header">Edit Optionset {{name}}</h1>
    {{partial "optionsetEdit"}}
    <div id="editbutton">
      <button {{action "removeOptionset"}} class="btn btn-default"><span class="glyphicon glyphicon-trash"></span> Delete Option set</button>
      <button class="btn btn-default" {{action 'doneEditing'}}><span class="glyphicon glyphicon-floppy-disk"></span> Save</button> 
      <button class="btn btn-default" {{action 'doneEditingReturn'}}><span class="glyphicon glyphicon-floppy-disk"></span> Save and return</button>
    </div>
</script>

<script type="text/x-handlebars" id="optionsets/new">
    <h1 class="page-header">Create a new Optionset</h1>
    <p>
      Optionsets are used to apply AMTC command line options (like whether to use TLS, which timeout, which AMT password etc.) to rooms.
      A newly created option set does not get assigned to any room by default. You have to visit the {{#link-to 'ous' this}}Room/OU administration page{{/link-to}} to make these assignments.
    </p>
    {{partial "optionsetEdit"}}
    <button class="btn btn-default" {{action 'doneEditingReturn'}}><span class="glyphicon glyphicon-floppy-disk"></span> Save option set</button>
</script>

<script type="text/x-handlebars" data-template-name='_optionsetEdit'>
  <form id="optionsetEditForm">
   <fieldset>
      <div class="inputline">
        <label for "name">Option set name</label>
        {{input type="text" value=name insert-newline="doneEditing" placeholder="shorthand name"}}
      </div>
      <div class="inputline">
        <label for "description">Description</label>
          {{input type="text" value=description insert-newline="doneEditing" placeholder="..."}}
      </div>
      <div class="inputline">
        <label for "description">Enforce AMT v5 EOI</label>
          {{input type="checkbox" checked=sw_v5}}
      </div>
      <div class="inputline">
        <label for "description">Enforce DASH (AMT v9)</label>
          {{input type="checkbox" checked=sw_dash}}
      </div>
      <div class="inputline">
        <label for "description">Enable SSH portscan</label>
          {{input type="checkbox" checked=sw_scan22}}
      </div>
      <div class="inputline">
        <label for "description">Enbale RDP portscan</label>
          {{input type="checkbox" checked=sw_scan3389}}
      </div>
      <div class="inputline">
        <label for "description">Use TLS (port 16993)</label>
          {{input type="checkbox" checked=sw_usetls}}
      </div>
      {{#if sw_usetls}}
        <div class="inputline">
          <label for "description">Skip TLS cert verification</label>
            {{input type="checkbox" checked=sw_skipcertchk}}
        </div>
        <div class="inputline">
          <label for "description">TLS CA cert file</label>
            {{input type="text" value=opt_cacertfile insert-newline="doneEditing"}}
        </div>
      {{/if}}
      <div class="inputline">
        <label for "description">AMT password file</label>
          {{input type="text" value=opt_passfile insert-newline="doneEditing" placeholder="/path/to/file"}}
      </div>
      <div class="inputline">
        <label for "description">Maximum number of threads</label>
          {{input type="text" value=opt_maxthreads insert-newline="doneEditing" size=2 placeholder="170"}}
      </div>
      <div class="inputline">
        <label for "description">Connection timeout [s]</label>
          {{input type="text" value=opt_timeout insert-newline="doneEditing" size=2 placeholder="10"}}
      </div>

   </fieldset>
  </form>
  <div class="clearboth"></div><br>
</script>

<!-- OUs / Rooms -->
<!-- from http://jsbin.com/alabob/70/edit : OU chooser / tree-branch/node -->
<script type="text/x-handlebars" data-template-name='_ouSelection'>
  {{#if ouTree}}
    {{tree-branch node=ouTree}}
  {{else}}
    <a href="#"><i class="fa fa-spinner fa-spin"></i> <i>loading rooms...</i></a>
  {{/if}}
</script>

<script type="text/x-handlebars" data-template-name="components/tree-branch">
  {{#each child in node.children}}
    {{tree-node node=child}}
  {{/each}}
</script>

<script type="text/x-handlebars" data-template-name="components/tree-node">
  {{#link-to 'ou' node.id}}
    <span {{bindAttr class=":toggle-icon node.children.length::leaf"}} {{action toggle}}>
      {{#if isExpanded}}
        &#x25BC;
      {{else}}
        &#x25B6;
      {{/if}}
    </span>
    {{node.name}}
  {{/link-to}}

  {{#if isExpanded}}
    {{tree-branch node=node}}
  {{/if}}
</script>

<script type="text/x-handlebars" id="ous">
{{! Display /rooms page: tabular room list view plus actions:add/remove/edit menu  }}
    <div class="row">
        <div class="col-lg-12">
            {{outlet}} <!-- see rooms/index : big table view of rooms -->
        </div>
    </div>

    <div class="row">
        <h3>Actions</h3>
        <ul>
            <li>{{#link-to 'ous.new'}}Add room{{/link-to}}</li>
            <li>{{#link-to 'ous'}}List rooms{{/link-to}}</li>
            <li>{{#link-to 'optionsets'}}Edit optionsets{{/link-to}}</li>
        </ul>
    </div class="row">
</script>

<script type="text/x-handlebars" id="ous/index">
    {{! Display a table with all rooms }}
    <h1 class="page-header">List of rooms</h1>
    <table class="table">
      <thead>
        <tr>
          <th>Edit</th>
          <th>OU</th>
          <th>Name</th>
          <th>Description</th>
          <th>Optionset</th>
        </tr>
      </thead>
      {{#each model}}
        <tr>
          <td>{{#link-to 'ou' this}}<i class="glyphicon glyphicon-edit"></i>{{/link-to}}</td>
          <td>{{#link-to 'ou' this}}{{ou_path}}{{/link-to}}</td>
          <td>{{name}}</td>
          <td>{{description}}</td>
          <td>{{optionset_id.name}}</td>
        </td></tr>
      {{/each}}
    </table>
</script>

<script type="text/x-handlebars" id="ou">
    {{! Display a single OU edit form using partial _deviceEdit }}
    <h1 class="page-header">Edit OU / Room {{name}}</h1>
    {{partial "ouEdit"}}
    <div id="editbutton">
      <button {{action "removeOu"}} class="btn btn-default"><span class="glyphicon glyphicon-trash"></span> Delete OU</button>
      <button class="btn btn-default" {{action 'doneEditing'}}><span class="glyphicon glyphicon-floppy-disk"></span> Save</button> 
      <button class="btn btn-default" {{action 'doneEditingReturn'}}><span class="glyphicon glyphicon-floppy-disk"></span> Save and return</button>
    </div>
</script>

<script type="text/x-handlebars" id="ous/new">    <h1 class="page-header">Create a new OU / room</h1>
    {{partial "ouEdit"}}
    <button class="btn btn-default" {{action 'doneEditingReturn'}}><span class="glyphicon glyphicon-floppy-disk"></span> Save device</button>
</script>

<script type="text/x-handlebars" data-template-name='_ouEdit'>
    {{! Edit/Display EXISTING display form (only) }}
    {{! http://emberjs.com/api/classes/Ember.Select.html }}
    <form id="ouEditForm">
     <fieldset>
        <div class="form-group">
          <label for "name">OU / room name</label>
          {{input class="form-control" type="text" value=name insert-newline="doneEditing"}}
          <p class="help-block">e.g. D 23.2</p>
        </div>
        <div class="form-group">
          <label for "description">OU description</label>
          {{input class="form-control" type="text" value=description insert-newline="doneEditing"}}
          <p class="help-block"></p>
        </div>
        <div class="form-group">
          <label for "optionset">Parent OU</label>
          {{view Ember.Select content=ous
                              class="form-control"
                              value=parent.id
                              selection=parent
                              prompt="Choose OU"
                              optionValuePath="content.id"
                              optionLabelPath="content.name" }}
          <p class="help-block">Choose the parent OU (or "folder") for this room</p>
        </div>
        <div class="form-group">
          <label for "optionset">AMT option set</label>
          {{view Ember.Select content=optionsets
                              class="form-control"
                              value=optionset_id.id
                              selection=optionset_id
                              prompt="Choose AMT Option set"
                              optionValuePath="content.id"
                              optionLabelPath="content.name" }}
          <p class="help-block">Optionsets may be created ...here... They will NOT be inherited.</p>
        </div>
     </fieldset>
    </form>
    <div class="clearboth"></div><br>
</script>

<script src="js/jslibs.js"></script>
<script src="js/app/app.js"></script>
<script src="rest-api.php/rest-config.js"></script>

<noscript>
    <div class="jumbotron">
      <h1><span class="label label-danger">OMFG!</span> !#@$^~%-/</h1>
      <p><br>Please enable JavaScript in your browser to use amtc-web.</p>
    </div>
</noscript>

</body>
</html>
